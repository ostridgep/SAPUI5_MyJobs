<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>MyJobs - My Team</title>
<script src="resources/sap-ui-core.js" type="text/javascript"
	id="sap-ui-bootstrap" data-sap-ui-libs="sap.m,sap.ui.commons"
	data-sap-ui-theme="sap_bluecrystal">
	
</script>
<script src="myresources/js/html5sql.js"></script>  
<script src="myresources/js/bqsync.js"></script>
<script src="myresources/js/MyJobsDB.js"></script>
<script src="myresources/js/MyJobsUtils.js"></script>
<script type="text/javascript">

jQuery.sap.require("sap.m.MessageBox");


html5sql.openDatabase("com.pjo.myjobsbackfill","myjobsbackfill", 5*1024*1024);	





var page  = new sap.m.Page('MyTeam',{
	title:"My Team",  


	headerContent: new sap.m.Button({
		
		icon: "sap-icon://home",
		press : function(){ window.location.href="Home.html"}
		
	}),


    content: 	
    	[
    	new sap.m.ScrollContainer("sc1", {
    	horizontal: true,
    	vertical: true,
    	content:[
				new sap.m.IconTabBar('tabBar',
					{
					expanded:'{device>/isNoPhone}',

					select:[function(oEvt) {		  
						  if(oEvt.getParameters().key=="Received"){oDetailPage.setFooter(detailFooter)}
						  if(oEvt.getParameters().key=="Sent"){oDetailPage.setFooter(detailFooter)}
						  if(oEvt.getParameters().key=="System"){oDetailPage.setFooter(detailFooter)}
						  if(oEvt.getParameters().key=="Team"){oDetailPage.setFooter(detailFooter)}
		
						}
						],
			
			items: [

 	               new sap.m.IconTabFilter( 'Receiced',{
	                   key:'Received',
	                   tooltip: 'Received Messages',
	                   icon: "sap-icon://email",
   	                   content:[
							new sap.m.Table("ReceivedTable",{
								columns:[
								         new sap.m.Column({header: new sap.m.Label({text:"Date"}),
								        	 hAlign: 'Left',width: '20%', minScreenWidth : "" , demandPopin: false}),
								         new sap.m.Column({header: new sap.m.Label({text:"From"}),
								        	 hAlign: 'Left',width: '30%',minScreenWidth : "" , demandPopin: true}),
								         new sap.m.Column({header: new sap.m.Label({text:"Subject"}),
								        	 hAlign: 'Left',width: '50%',minScreenWidth : "" , demandPopin: true })       	                         
						           	     ]
							})
							]
			    		}),
	               new sap.m.IconTabFilter( 'Sent',{
	                   key:'Sent',
	                   tooltip: 'Sent Messages',
	                   icon: "sap-icon://forward",
   	                   content:[
							new sap.m.Table("SentTable",{
								columns:[
								         new sap.m.Column({header: new sap.m.Label({text:"Date"}),
								        	 hAlign: 'Left',width: '20%', minScreenWidth : "" , demandPopin: false}),
								         new sap.m.Column({header: new sap.m.Label({text:"To"}),
								        	 hAlign: 'Left',width: '30%',minScreenWidth : "" , demandPopin: true}),
								         new sap.m.Column({header: new sap.m.Label({text:"Subject"}),
								        	 hAlign: 'Left',width: '50%',minScreenWidth : "" , demandPopin: true })       	                         
						           	     ]
							})
							]
			    }),
	               new sap.m.IconTabFilter( 'System',{
	                   key:'System',
	                   tooltip: 'System Messages',
	                   icon: "sap-icon://Alert",
   	                   content:[
							new sap.m.Table("SystemTable",{
								columns:[
								         new sap.m.Column({header: new sap.m.Label({text:"Date"}),
								        	 hAlign: 'Left',width: '20%', minScreenWidth : "" , demandPopin: false}),
								         new sap.m.Column({header: new sap.m.Label({text:"From"}),
								        	 hAlign: 'Left',width: '30%',minScreenWidth : "" , demandPopin: true}),
								         new sap.m.Column({header: new sap.m.Label({text:"Subject"}),
								        	 hAlign: 'Left',width: '50%',minScreenWidth : "" , demandPopin: true })       	                         
						           	     ]
							})
							]
			    	}),
   	                new sap.m.IconTabFilter( 'Team',{
	                   key:'Team',
	                   tooltip: 'Team',
	                   icon: "sap-icon://account",
	                   content:[
								new sap.m.Text( 'LongText',{})
	                            ]
	                })			            	                
   	                ] //item
					}) //tabbar
				]//content
    	})
		],
    enableScrolling:true,showNavButton: "{device>/isPhone}" });

var app = new sap.m.App();

app.setInitialPage(page.getId());	
	


page.placeAt("body");
$(function() {
	buildReceived()
	buildSent()
	buildSystem()
	
	});
</script>
</head>
<body id="body" class="sapUiBody">
<script></script>
</body>
<script>
function buildReceived(){
	html5sql.process("SELECT * FROM MyMessages  ;",
			 function(transaction, results, rowsArray){
				var n = 0;
				var opTable = sap.ui.getCore().getElementById('ReceivedTable');
				opTable.removeAllItems();
				while (n < rowsArray.length) {
					
			
					opTable.addItem (new sap.m.ColumnListItem({
						cells : 
							[
							new sap.m.Text({text: rowsArray[n].date+" "+rowsArray[n].time}),
				            new sap.m.Text({text: rowsArray[n].msgfromname}),
						
				            new sap.m.Text({text: rowsArray[n].msgsubject})   
					 		]
						}));
					n++;
				 }

			 },
			 function(error, statement){
				 //outputLogToDB(); 
			 }        
			);	
}
function buildSent(){
	html5sql.process("SELECT * FROM MyMessages  ;",
			 function(transaction, results, rowsArray){
				var n = 0;
				var opTable = sap.ui.getCore().getElementById('SentTable');
				opTable.removeAllItems();
				while (n < rowsArray.length) {
					
			
					opTable.addItem (new sap.m.ColumnListItem({
						cells : 
							[
							new sap.m.Text({text: rowsArray[n].date+" "+rowsArray[n].time}),
				            new sap.m.Text({text: rowsArray[n].msgtoname}),
						
				            new sap.m.Text({text: rowsArray[n].msgsubject})   
					 		]
						}));
					n++;
				 }

			 },
			 function(error, statement){
				 //outputLogToDB(); 
			 }        
			);	
}
function buildSystem(){
	html5sql.process("SELECT * FROM MyMessages  ;",
			 function(transaction, results, rowsArray){
				var n = 0;
				var opTable = sap.ui.getCore().getElementById('SystemTable');
				opTable.removeAllItems();
				while (n < rowsArray.length) {
					
			
					opTable.addItem (new sap.m.ColumnListItem({
						cells : 
							[
							new sap.m.Text({text: rowsArray[n].date+" "+rowsArray[n].time}),
				            new sap.m.Text({text: rowsArray[n].msgfromname}),
						
				            new sap.m.Text({text: rowsArray[n].msgsubject})   
					 		]
						}));
					n++;
				 }

			 },
			 function(error, statement){
				 //outputLogToDB(); 
			 }        
			);	
}
</script>
</html>
